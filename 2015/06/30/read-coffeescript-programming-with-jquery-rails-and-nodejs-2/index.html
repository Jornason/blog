<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> CoffeeScript Programming with jQuery, rails and Nodejs (2) | TaoAlpha's Blog</title><meta name="description" content="Here is my new blog based on hexo."><meta name="viewport" content="width=device-width, initial-scale=1"><!-- open graph part--><meta property="og:image" content="http://taoalpha.me/images/newblog.jpg"><meta property="og:description" content="TaoAlpha's hexo Blog"><meta property="og:type" content="website"><link rel="short icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/default.css"></head><body class="blogpost"><aside class="home-menu"><nav class="home-icon-con upside"></nav><a href="/blog/" class="home-menu-icon brand active">涛</a><a href="/blog/tipme" class="home-menu-icon"><i class="fa fa-1x fa-gratipay"></i></a><a href="javascript:$('.searchbox').focus().css('border', '4px dashed #666');setTimeout(function(){$('.searchbox').focus().css('border', 'none').css('border-bottom', '1px solid #ccc')},1000);" class="home-menu-icon"><i class="fa fa-1x fa-search"></i></a><a href="/blog/puzzle" class="home-menu-icon"><i class="fa fa-1x fa-puzzle-piece"></i></a><a href="javascript:;" title="Contact Me" class="home-menu-icon follow">+</a><div class="home-contact"><a href="http://facebook.com/zzgary/" target="something"><img src="https://cdn1.iconfinder.com/data/icons/social-shade-rounded-rects/512/facebook-32.png" alt="facebook"></a><a href="http://github.com/taoalpha/" target="something"><img src="https://cdn1.iconfinder.com/data/icons/social-shade-rounded-rects/512/github-32.png" alt="github"></a><a href="http://taoalpha.me" target="something"><img src="https://cdn3.iconfinder.com/data/icons/colore-sociale/32/mewally_32x32.png" alt="portfolio"></a><a href="http://douban.com/people/129154019" target="something"><img src="http://img3.douban.com/favicon.ico" alt="douban"></a></div><nav class="home-icon-con downside"><a href="#contribution" class="home-menu-icon makecontribution"><i class="fa fa-pencil fa-1x"></i></a><a id="togglemusic" href="javascript:;" class="home-menu-icon"><i class="fa fa-music fa-1x"></i></a></nav><div id="musicbar"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="40" src=""></iframe></div></aside><div id="contribution" class="hide"><span class="close"></span><input id="sender_mail" type="email" placeholder="Give me your email"><textarea id="contributionContent" name="contribution" cols="30" rows="10" placeholder="Thanks for your contribution!  Now tell me what you want to say: feedback ? advice ? contributions ? Whatever you want ^_^.  I will look at it as soon as I receive it and reply you asap.  "></textarea><input id="sendToMe" type="submit"></div><article id="content"><div id="progressbar"><span class="bg"></span><span class="text"></span></div><section class="entry"><h1 class="entry-title"><a href="http://taoalpha.me/blog/2015/06/30/read-coffeescript-programming-with-jquery-rails-and-nodejs-2/" title="CoffeeScript Programming with jQuery, rails and Nodejs (2)">CoffeeScript Programming with jQuery, rails and Nodejs (2)</a></h1><div class="meta-top"><a href="http://taoalpha.me"><div style="display:inline-block;" class="avatar"><img src="https://avatars3.githubusercontent.com/u/4335753?v=3&amp;s=40" alt="100"></div><span>TaoAlpha</span></a><span>2015-06-30</span><span class="wordage">7294字</span><span class="readspeed">21 分钟读完</span></div><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>After learned the basic syntax of CoffeeScript, I re-wrote all my blog’s js files with CoffeeScript. I have to say, practice is the best way to learn and understand one skill. Especially for coding, if you just read the book and never write a single line by yourself, you will never become a master of it or you may stick in the beginner for ever.</p>
<p>Today we will finish the book. Talking about how to combine the CoffeeScript with some other web tools we use a lot: jQuery, Rails and Nodejs.</p>
<h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><p>Here I just ignored the second chapter about how to install the coffeescript and nodejs in your computer, if you need some help, feel free to comment below the blog or just visit the <a href="https://nodejs.org/" target="_blank" rel="external">nodejs</a> and <a href="http://coffeescript.org/" target="_blank" rel="external">coffeescript</a> to find a way yourself.</p>
<h3 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h3><p>jQuery is the most popular js module people used in their websites or webapps. And using jQuery with CoffeeScript is just like javascript. jQuery is javascript, after all.</p>
<p>Want to use CoffeeScript with jQuery? Just do it and follow the rules we learn from the basic syntax part. Here I list several examples and if you look it closely, you will find everything you have already known if you read the first chapter carefully. The author of the book shows us another complex examples: <a href="https://gist.github.com/alecperkins/3363111" target="_blank" rel="external">TodoMVC in CoffeeScript</a>.</p>
<p>BTW: <a href="http://todomvc.com/" target="_blank" rel="external">TodoMVC</a> is a great project which shows you how to write a todo app in all kinds of tools and frameworks.</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$ -&gt;</span><br><span class="line">  <span class="keyword">do</span> some</span><br><span class="line">  <span class="keyword">do</span> another</span><br><span class="line"><span class="comment">### =&gt;</span><br><span class="line">$(function() &#123;</span><br><span class="line">  some();</span><br><span class="line">  return another();</span><br><span class="line">&#125;);</span><br><span class="line">That's just like the $(document).ready(function()&#123;&#125;)</span><br><span class="line">###</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A function using ajax to send mail, which is a new feature I will add to my blog in a few days :)</span></span><br><span class="line"><span class="property">@sendMail</span> = <span class="function"><span class="params">(msg)</span>-&gt;</span></span><br><span class="line">  $.ajax</span><br><span class="line">    <span class="attribute">type</span>: <span class="string">'POST'</span></span><br><span class="line">    <span class="attribute">url</span>: <span class="string">'https://mandrillapp.com/api/1.0/messages/send.json'</span></span><br><span class="line">    <span class="attribute">data</span>:</span><br><span class="line">      <span class="string">'key'</span>: <span class="string">''</span></span><br><span class="line">      <span class="string">'message'</span>:</span><br><span class="line">        <span class="string">'from_email'</span>: msg.sender_mail</span><br><span class="line">        <span class="string">'from_name'</span> : msg.sender_name</span><br><span class="line">        <span class="string">'to'</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">'email'</span>: <span class="string">''</span></span><br><span class="line">              <span class="string">'name'</span>: <span class="string">'TaoAlpha'</span></span><br><span class="line">              <span class="string">'type'</span>: <span class="string">'to'</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        <span class="string">'autotext'</span>: <span class="string">'true'</span></span><br><span class="line">        <span class="string">'subject'</span>: msg.subject</span><br><span class="line">        <span class="string">'html'</span>: msg.content</span><br><span class="line">  .done (response)-&gt;</span><br><span class="line">    showAlert(<span class="string">"success"</span>,<span class="string">"Thanks for your contribution!"</span>)</span><br><span class="line">  .fail (data)-&gt;</span><br><span class="line">    showAlert(<span class="string">"fail"</span>,<span class="string">"Sorry! Failed to send the email. Please retry!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># another function to get unique result from an array of objects</span></span><br><span class="line"><span class="attribute">Array</span>::getObjectUnique = <span class="function"><span class="params">(id)</span> -&gt;</span></span><br><span class="line">  a=b=[];</span><br><span class="line"><span class="function">  <span class="title">add</span> = <span class="params">(data)</span> -&gt;</span> b.push data[id];data</span><br><span class="line">  (add i <span class="keyword">for</span> i <span class="keyword">in</span> @ <span class="keyword">when</span> b.indexOf(i[id]) == -<span class="number">1</span> )</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">// You can see that you have saved a lot of keystrokes and the codes look more clean and beautiful.</span><br><span class="line">// Because coffeescript doesn't support declare global variables directly, and if we want to use the function in other script, we need to declare it into the `this` scope.</span><br><span class="line"></span><br><span class="line">this.sendMail = function(msg) &#123;</span><br><span class="line">  return $.ajax(&#123;</span><br><span class="line">    type: 'POST',</span><br><span class="line">    url: 'https://mandrillapp.com/api/1.0/messages/send.json',</span><br><span class="line">    data: &#123;</span><br><span class="line">      'key': '',</span><br><span class="line">      'message': &#123;</span><br><span class="line">        'from_email': msg.sender_mail,</span><br><span class="line">        'from_name': msg.sender_name,</span><br><span class="line">        'to': [</span><br><span class="line">          &#123;</span><br><span class="line">            'email': '',</span><br><span class="line">            'name': 'TaoAlpha',</span><br><span class="line">            'type': 'to'</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        'autotext': 'true',</span><br><span class="line">        'subject': msg.subject,</span><br><span class="line">        'html': msg.content</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).done(function(response) &#123;</span><br><span class="line">    return showAlert("success", "Thanks for your contribution!");</span><br><span class="line">  &#125;).fail(function(data) &#123;</span><br><span class="line">    return showAlert("fail", "Sorry! Failed to send the email. Please retry!");</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"># get unque result for array of objects</span><br><span class="line">Array.prototype.getObjectUnique = function(id) &#123;</span><br><span class="line">  var a, add, b, i, j, len, results;</span><br><span class="line">  a = b = [];</span><br><span class="line">  add = function(data) &#123;</span><br><span class="line">    b.push(data[id]);</span><br><span class="line">    return data;</span><br><span class="line">  &#125;;</span><br><span class="line">  results = [];</span><br><span class="line">  for (j = 0, len = this.length; j &lt; len; j++) &#123;</span><br><span class="line">    i = this[j];</span><br><span class="line">    if (b.indexOf(i[id]) === -1) &#123;</span><br><span class="line">      results.push(add(i));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return results;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Rails"><a href="#Rails" class="headerlink" title="Rails"></a>Rails</h3><p>Ruby on Rails is a web framework that came around in 2004. And it soon became quite popular. Actually many people believe that Rails saved the ruby…</p>
<p>Check this:<a href="http://rubyonrails.org/download" target="_blank" rel="external">How to download and install Rails</a> if you haven’t installed it.</p>
<h4 id="Rails_u2019s_principles"><a href="#Rails_u2019s_principles" class="headerlink" title="Rails’s principles"></a>Rails’s principles</h4><ul>
<li>Convention over configuration</li>
</ul>
<blockquote>
<p>Rails is designed to assume that the programmer will follow certain known conventions, which if used, provide great benefit and much less need to configure the framework.That means that the framework makes assumptions on how a typical application should be built and structured and it doesn’t try to be overly flexible and configurable. This helps you spend less time on mundane tasks like configuring and wiring up an application architecture and more time on actually building your app.</p>
</blockquote>
<ul>
<li>Don’t repeat yourself, or DRY</li>
</ul>
<blockquote>
<p>Every piece of knowledge must have a single, unambiguous, and authoritative representation within a system.<br>Rails strives to remove duplication and boilerplate wherever it can.</p>
</blockquote>
<h4 id="How_to_use_Rails_with_CoffeeScript"><a href="#How_to_use_Rails_with_CoffeeScript" class="headerlink" title="How to use Rails with CoffeeScript"></a>How to use Rails with CoffeeScript</h4><p>Luckily, after Rails 3.1, you don’t need do anything to let Rails support CoffeeScript. It has already become part of rails! And also, rails has changed its default js library to jQuery.</p>
<p>So what you need to do if you want to use coffeescript with rails? Nothing but learn rails!</p>
<p>Just like the author said in the book: “If you haven’t done so already, I encourage you to spend some more time learning Rails as well as Ruby, and immersing yourself in the wonderful communities they support.”</p>
<h3 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h3><p>Node is fantastic. It changes something. Before node, javascript was mostly run inside browsers. Now it just came out and gave web developers a chance to become a full-stack!</p>
<h4 id="Features_of_Node"><a href="#Features_of_Node" class="headerlink" title="Features of Node"></a>Features of Node</h4><ul>
<li>Event-driven</li>
</ul>
<blockquote>
<p>The Node.js framework only allows non-blocking, asynchronous I/O. This means that any I/O operation that is accessing an external resource, such as the operating system, a database, or a network resource must happen asynchronously.</p>
</blockquote>
<ul>
<li>Fast and scalable</li>
</ul>
<blockquote>
<p>The V8 JavaScript engine(created by google and used in chrome) used by Node.js is highly optimized for performance, thus making Node.js applications very fast. The fact that Node is non-blocking will ensure that your applications will be able to handle many concurrent client requests without using a lot of system resources.</p>
</blockquote>
<ul>
<li>Node is not Rails</li>
</ul>
<blockquote>
<p>Rails strives to be a full-stack solution to building web applications, whereas Node.js is more of a low-level system for writing any type of fast and scalable network application.</p>
</blockquote>
<h4 id="Node_and_CoffeeScript"><a href="#Node_and_CoffeeScript" class="headerlink" title="Node and CoffeeScript"></a>Node and CoffeeScript</h4><p>Want to write coffeescript in node? It’s easy, all you need is a module named <code>CoffeeScript</code>. And like many other languages, node has several frameworks people built for web development, like: <a href="http://expressjs.com/" target="_blank" rel="external">Express</a>.</p>
<p>The core about how to use coffeescript with nodejs is to use the <code>--watch</code> for <code>coffee</code> command in node. It will automatically compile all file end with <code>coffee</code> into <code>js</code> when there is a change made into these files.</p>
<p>And just like jQuery, you just follow the rules and write your code.</p>
<h2 id="Digest"><a href="#Digest" class="headerlink" title="Digest"></a>Digest</h2><p>CoffeeScript is a tool that can help you write js more quickly and elegant. And any platform or language you want to use coffeescript, what you need to do is following the coffeescript’s rules. There is no difference caused by platform or language.</p>
<p>That’s all. Thanks!</p>
<aside class="tipme special"><a href="/blog/tipme" class="tipme">If you like my work, buy me a soda or send me a book ! ^_^</a></aside></section><aside class="sidenav"><input type="text" placeholder="Enter to search" class="st-default-search-input searchbox"></aside><aside class="sidenav series"><h2>In Serie: The Way I Learn CoffeeScript<i class="fa fa-arrow-down expand"></i><i class="collapse fa fa-arrow-up"></i></h2><ul class="article-list"><li><a href="http://taoalpha.me/blog/2015/06/28/read-coffeescript-programming-with-jquery-rails-and-nodejs/" data-id='null'>CoffeeScript Programming with jQuery, rails and Nodejs (1)</a></li><li><a href="http://taoalpha.me/blog/2015/06/30/read-coffeescript-programming-with-jquery-rails-and-nodejs-2/" data-id='null' class="current">CoffeeScript Programming with jQuery, rails and Nodejs (2)</a></li></ul></aside><div class="relatedposts sidenav"><h2>Related Posts:</h2><ul class="article-list"><li><a href="http://taoalpha.me/blog/2015/06/28/read-coffeescript-programming-with-jquery-rails-and-nodejs/">CoffeeScript Programming with jQuery, rails and Nodejs (1)</a></li><li><a href="http://taoalpha.me/blog/2015/06/27/read-javascript-the-definitive-guide-8/">JavaScript the Definitive Guide (8)</a></li><li><a href="http://taoalpha.me/blog/2015/06/26/read-javascript-the-definitive-guide-7/">JavaScript the Definitive Guide (7)</a></li><li><a href="http://taoalpha.me/blog/2015/06/25/read-javascript-the-definitive-guide-6/">JavaScript the Definitive Guide (6)</a></li><li><a href="http://taoalpha.me/blog/2015/06/25/read-speaking-like-people-on-ted/">像TED一样演讲</a></li></ul></div><aside class="sidenav"><div class="recentposts"><h2>Recent Posts:</h2><ul class="article-list"><li><a href="http://taoalpha.me/blog/2016/01/20/oj-oj-word-search-problems/">OJ Word Search Problems</a></li><li><a href="http://taoalpha.me/blog/2016/01/11/tech-es6-quiz-with-answer/">ES6 Quiz With Answer</a></li><li><a href="http://taoalpha.me/blog/2016/01/10/read-smacss-scalable-and-modular-architecture-for-css/">Scalable and Modular Architecture for CSS</a></li><li><a href="http://taoalpha.me/blog/2016/01/09/read-javascript-coding-style/">JavaScript Coding Style</a></li><li><a href="http://taoalpha.me/blog/2016/01/06/oj-oj-leetcode-sort-3/">OJ LeetCode Sort 3</a></li></ul></div></aside><div class="comments"><div data-thread-key="2015/06/30/read-coffeescript-programming-with-jquery-rails-and-nodejs-2/" data-title="CoffeeScript Programming with jQuery, rails and Nodejs (2)" data-url="http://taoalpha.me/blog/2015/06/30/read-coffeescript-programming-with-jquery-rails-and-nodejs-2/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"taoalpha"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></article><div class="notification fail hidden"></div><!-- jquery--><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46725017-2",'auto');ga('send','pageview');</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','CUMLELEvkSRAFuVehSCm','2.0.0');</script><!-- main functions--><script src="/blog/js/functions.js"></script><script src="/blog/js/default.js"></script><script src="/blog/js/post.js"></script></body></html>