<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> CoffeeScript Programming with jQuery, rails and Nodejs (1) | TaoAlpha's Blog</title><meta name="description" content="Here is my new blog based on hexo."><meta name="viewport" content="width=device-width, initial-scale=1"><!-- open graph part--><meta property="og:image" content="http://taoalpha.me/images/newblog.jpg"><meta property="og:description" content="TaoAlpha's hexo Blog"><meta property="og:type" content="website"><link rel="short icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/default.css"></head><body class="blogpost"><aside class="home-menu"><nav class="home-icon-con upside"></nav><a href="/blog/" class="home-menu-icon brand active">涛</a><a href="/blog/tipme" class="home-menu-icon"><i class="fa fa-1x fa-gratipay"></i></a><a href="javascript:$('.searchbox').focus().css('border', '4px dashed #666');setTimeout(function(){$('.searchbox').focus().css('border', 'none').css('border-bottom', '1px solid #ccc')},1000);" class="home-menu-icon"><i class="fa fa-1x fa-search"></i></a><a href="/blog/puzzle" class="home-menu-icon"><i class="fa fa-1x fa-puzzle-piece"></i></a><a href="javascript:;" title="Contact Me" class="home-menu-icon follow">+</a><div class="home-contact"><a href="http://facebook.com/zzgary/" target="something"><img src="https://cdn1.iconfinder.com/data/icons/social-shade-rounded-rects/512/facebook-32.png" alt="facebook"></a><a href="http://github.com/taoalpha/" target="something"><img src="https://cdn1.iconfinder.com/data/icons/social-shade-rounded-rects/512/github-32.png" alt="github"></a><a href="http://taoalpha.me" target="something"><img src="https://cdn3.iconfinder.com/data/icons/colore-sociale/32/mewally_32x32.png" alt="portfolio"></a><a href="http://douban.com/people/129154019" target="something"><img src="http://img3.douban.com/favicon.ico" alt="douban"></a></div><nav class="home-icon-con downside"><a href="#contribution" class="home-menu-icon makecontribution"><i class="fa fa-pencil fa-1x"></i></a><a id="togglemusic" href="javascript:;" class="home-menu-icon"><i class="fa fa-music fa-1x"></i></a></nav><div id="musicbar"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="40" src=""></iframe></div></aside><div id="contribution" class="hide"><span class="close"></span><input id="sender_mail" type="email" placeholder="Give me your email"><textarea id="contributionContent" name="contribution" cols="30" rows="10" placeholder="Thanks for your contribution!  Now tell me what you want to say: feedback ? advice ? contributions ? Whatever you want ^_^.  I will look at it as soon as I receive it and reply you asap.  "></textarea><input id="sendToMe" type="submit"></div><div class="stars"></div><div class="twinkling"></div><article id="content"><div id="progressbar"><span class="bg"></span><span class="text"></span></div><section class="entry"><h1 class="entry-title"><a href="http://taoalpha.me/blog/2015/06/28/read-coffeescript-programming-with-jquery-rails-and-nodejs/" title="CoffeeScript Programming with jQuery, rails and Nodejs (1)">CoffeeScript Programming with jQuery, rails and Nodejs (1)</a></h1><div class="meta-top"><a href="http://taoalpha.me"><div style="display:inline-block;" class="avatar"><img src="https://avatars3.githubusercontent.com/u/4335753?v=3&amp;s=40" alt="100"></div><span>TaoAlpha</span></a><span>2015-06-28</span><span class="wordage">12448字</span><span class="readspeed">36 分钟读完</span></div><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>The notes I took while I was learning the ‘CoffeeScript’. If you are a real beginner with ‘CoffeeScript’, I suggest you start with another book called “The Little Book on CoffeeScript”, it’s better for beginners. And after that, this one is definitely your best choice.</p>
<p>CoffeeScript is a language which complies to JavaScript. Like the sass or scss to css except that CoffeeScript is not compatible with javascript. So you can not mix the javascript syntax with the CoffeeScript.</p>
<p>This note is mainly about the fist chapter of the book, a nice introduction for CoffeeScript including the basic syntax.</p>
<blockquote>
<p>And to improve my english, I think i will start writing english notes for the english books. ^_^</p>
</blockquote>
<h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><p>CoffeeScript is pretty popular in the community of JavaScript for its simplicity, elegant and readable. Now let us dive into it.</p>
<p>Instead of  listing the keywords and statements used in CoffeeScript one by one, it would better we learn CoffeeScript from comparing the difference between the CoffeeScript and JavaScript.</p>
<h3 id="CoffeeScript_fix_some_ugly_stuffs_in_JavaScript"><a href="#CoffeeScript_fix_some_ugly_stuffs_in_JavaScript" class="headerlink" title="CoffeeScript fix some ugly stuffs in JavaScript"></a>CoffeeScript fix some ugly stuffs in JavaScript</h3><ul>
<li>CoffeeScript removes most of the semicolons and the curly braces which used a lot in JavaScript, gives us a clearly view of the code, but you can still use the semicolons if you want, and you still have to use the semicolons if you want to put multiple statements in single one;</li>
<li>CoffeeScript learns a lot from ruby and python. Like this one: it uses whitespace or indentation, more accurately, to delimit the code blocks instead of braces.</li>
<li>CoffeeScript removes a lot of parenthesis for many statements and functions, like if..else, while loops and functions with single string parameter. But this is optional, you can still use them if you want. <strong>Notice: you will need parenthesis if you want to call a function without any parameters)</strong></li>
<li>Function: as the first class object in JavaScript, CoffeeScript also does a lot improvements for it.<ul>
<li>If you write js, you will know that the syntax is really ugly when you want to write a anonymous function. Now you can make it pretty beautiful with CoffeeScript;</li>
<li>CoffeeScript also saves you a lot keystrokes for defining the functions;</li>
<li>so what are the rules?<ul>
<li>Replace the <code>function</code> keyword with <code>-&gt;</code>;</li>
<li>Drop the parenthesis if there is no argument for the function;</li>
<li>Put the arguments enclosed with parenthesis in front of the <code>-&gt;</code>, and if the argument has a default value, you can set it in the parenthesis;</li>
<li>Drop the curly braces and use indentation for the function body;</li>
<li>Automatically return the last expression of the function, but if you need return something before, you still need to use the <code>return</code>;</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> -&gt; alert <span class="string">'hi there!'</span></span><br><span class="line"><span class="comment"># the code above won't self-initiating, if you want to do that, you need use parenthesis or the `do` keyword like below:</span></span><br><span class="line"><span class="comment"># (-&gt; alert 'hi there!')()</span></span><br><span class="line"><span class="comment"># do -&gt; alert 'hi there!'</span></span><br><span class="line"><span class="function"></span><br><span class="line"><span class="title">square</span> = <span class="params">(n=<span class="number">1</span>)</span> -&gt;</span> n * n</span><br><span class="line"></span><br><span class="line"><span class="comment"># function using splats</span></span><br><span class="line"><span class="comment"># this is an alternative way for using Array.prototype.slice()</span></span><br><span class="line"><span class="function"><span class="title">gpaScoreAverage</span> = <span class="params">(scores...)</span> -&gt;</span></span><br><span class="line">  total = scores.reduce (a, b) -&gt; a + b</span><br><span class="line">  total / scores.length</span><br><span class="line"></span><br><span class="line">alert gpaScoreAverage(<span class="number">65</span>,<span class="number">78</span>,<span class="number">81</span>)</span><br><span class="line">scores = [<span class="number">78</span>, <span class="number">75</span>, <span class="number">79</span>]</span><br><span class="line">alert gpaScoreAverage(scores...)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> square;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> alert(<span class="string">"hi there!"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/* the code in comments above will compile to:</span><br><span class="line">(function()&#123;</span><br><span class="line">  if (n == null) &#123;</span><br><span class="line">    n = 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return alert("hi there!");</span><br><span class="line">&#125;)();</span><br><span class="line">*/</span></span><br><span class="line">square = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n * n;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [].slice.call(arguments,0) ==&gt;  Array.prototype.slice.call(arguments,0)</span></span><br><span class="line"><span class="keyword">var</span> gpaScoreAverage, scores,</span><br><span class="line">  slice = [].slice;</span><br><span class="line"></span><br><span class="line">gpaScoreAverage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scores, total;</span><br><span class="line">  scores = <span class="number">1</span> &lt;= <span class="built_in">arguments</span>.length ? slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>) : [];</span><br><span class="line">  <span class="comment">// get the single score value or a list of the scores</span></span><br><span class="line">  total = scores.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> total / scores.length;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">alert(gpaScoreAverage(<span class="number">65</span>, <span class="number">78</span>, <span class="number">81</span>));</span><br><span class="line"></span><br><span class="line">scores = [<span class="number">78</span>, <span class="number">75</span>, <span class="number">79</span>];</span><br><span class="line"></span><br><span class="line">alert(gpaScoreAverage.apply(<span class="literal">null</span>, scores));</span><br></pre></td></tr></table></figure>
<h3 id="CoffeeScript_saves_you_a_lot_of_keystrokes"><a href="#CoffeeScript_saves_you_a_lot_of_keystrokes" class="headerlink" title="CoffeeScript saves you a lot of keystrokes"></a>CoffeeScript saves you a lot of keystrokes</h3><ul>
<li>CoffeeScript will declare the variables you need at the top of the function for you automatically. So that means you can’t create the global variables in a function like you can do in JavaScript, actually you can’t use the <code>var</code> keyword in CoffeeScript. &lt;= many people agree that omitting the <code>var</code> keyword makes the variables become global is a really bad desgin…</li>
<li>Object:<ul>
<li>CoffeeScript supports the <code>class</code> keyword, and it will create a closure to build the class;</li>
<li>Use the <code>constructor</code> to initialize some private properties, or just omit it;</li>
<li>Every function you define in a <code>class</code> will be added to the object as a prototype method;</li>
<li>Use <code>@</code> as a shortcut for <code>this</code>;</li>
<li><strong>fat arrow</strong>: When you want to use <code>this</code> in previous scope instead of the new scope, you need the fat arrow : <code>=&gt;</code>;</li>
<li>Use <code>super</code> to call the parent’s method (same name, so just pass the parameter);</li>
<li>Use <code>::</code> as a shortcut for <code>.prototype</code>, so you can extend your prototype as this:<code>Vehicle::stop =-&gt; alert &#39;stop&#39;</code>;</li>
</ul>
</li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span></span></span><br><span class="line">  <span class="comment"># Use the constructor to initialize some private properties</span></span><br><span class="line">  <span class="comment"># Use @ as this</span></span><br><span class="line">  <span class="attribute">constructor</span>: <span class="function">-&gt;</span></span><br><span class="line">    <span class="property">@c</span> = <span class="number">1</span></span><br><span class="line">  <span class="attribute">drive</span>: <span class="function"><span class="params">(km)</span> -&gt;</span></span><br><span class="line">    alert <span class="string">"Drove <span class="subst">#&#123;km&#125;</span> kilometres"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="keyword">extends</span> <span class="title">Vehicle</span></span></span><br><span class="line"> <span class="attribute">constructor</span>: <span class="function">-&gt;</span></span><br><span class="line">   <span class="property">@odometer</span> = <span class="number">0</span></span><br><span class="line"> <span class="attribute">drive</span>: <span class="function"><span class="params">(km)</span> -&gt;</span></span><br><span class="line">   <span class="property">@odometer</span> += km</span><br><span class="line">   <span class="keyword">super</span> km</span><br><span class="line"> <span class="attribute">name</span>:<span class="string">"John Doe"</span></span><br><span class="line"> <span class="attribute">driver</span>: <span class="function"><span class="params">(msg)</span> -&gt;</span></span><br><span class="line">   <span class="property">@msg</span> = msg</span><br><span class="line"> <span class="attribute">whoisdriver</span>: <span class="function">-&gt;</span></span><br><span class="line">   <span class="property">@msg</span>()</span><br><span class="line"></span><br><span class="line">car = <span class="keyword">new</span> Car</span><br><span class="line">car.drive <span class="number">5</span></span><br><span class="line">alert <span class="string">"Odometer is at <span class="subst">#&#123;car.odometer&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line">  <span class="attribute">constructor</span>: <span class="function"><span class="params">(name)</span>-&gt;</span></span><br><span class="line">    <span class="property">@name</span> = name</span><br><span class="line">    <span class="property">@mycar</span> = <span class="keyword">new</span> Car()</span><br><span class="line">    <span class="property">@mycar</span>.driver =&gt; alert <span class="string">"<span class="subst">#&#123;<span class="property">@name</span>&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">mike = <span class="keyword">new</span> Person <span class="string">"Mike"</span></span><br><span class="line"><span class="comment"># use `=&gt;` to show mike's name instead of the default `john doe` set in Car</span></span><br><span class="line">mike.mycar.whoisdriver()</span><br></pre></td></tr></table></figure>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">var Car, Person, Vehicle, car, mike,</span><br><span class="line">  extend = function(child, parent) &#123; <span class="keyword">for</span> (var key <span class="keyword">in</span> parent) &#123; <span class="keyword">if</span> (hasProp.call(parent, key)) child[key] = parent[key]; &#125; function ctor() &#123; <span class="keyword">this</span>.constructor = child; &#125; ctor.prototype = parent.prototype; child.prototype = <span class="keyword">new</span> ctor(); child.__super__ = parent.prototype; <span class="keyword">return</span> child; &#125;,</span><br><span class="line">  hasProp = &#123;&#125;.hasOwnProperty;</span><br><span class="line"></span><br><span class="line">Vehicle = (function() &#123;</span><br><span class="line">  function Vehicle() &#123;</span><br><span class="line">    <span class="keyword">this</span>.c = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Vehicle.prototype.drive = function(km) &#123;</span><br><span class="line">    <span class="keyword">return</span> alert(<span class="string">"Drove "</span> + km + <span class="string">" kilometres"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Vehicle;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">Car = (function(superClass) &#123;</span><br><span class="line">  extend(Car, superClass);</span><br><span class="line"></span><br><span class="line">  function Car() &#123;</span><br><span class="line">    <span class="keyword">this</span>.odometer = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Car.prototype.drive = function(km) &#123;</span><br><span class="line">    <span class="keyword">this</span>.odometer += km;</span><br><span class="line">    <span class="keyword">return</span> Car.__super__.drive.call(<span class="keyword">this</span>, km);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Car.prototype.name = <span class="string">"John Doe"</span>;</span><br><span class="line"></span><br><span class="line">  Car.prototype.driver = function(msg) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.msg = msg;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Car.prototype.whoisdriver = function() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.msg();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Car;</span><br><span class="line"></span><br><span class="line">&#125;)(Vehicle);</span><br><span class="line"></span><br><span class="line">car = <span class="keyword">new</span> Car;</span><br><span class="line">car.drive(<span class="number">5</span>);</span><br><span class="line">alert(<span class="string">"Odometer is at "</span> + car.odometer);</span><br><span class="line"></span><br><span class="line">Person = (function() &#123;</span><br><span class="line">  function Person(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.mycar = <span class="keyword">new</span> Car();</span><br><span class="line">    <span class="keyword">this</span>.mycar.driver((function(_this) &#123;</span><br><span class="line">      <span class="keyword">return</span> function() &#123;</span><br><span class="line">        <span class="keyword">return</span> alert(<span class="string">""</span> + _this.name);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)(<span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Person;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">mike = <span class="keyword">new</span> Person(<span class="string">"Mike"</span>);</span><br><span class="line">mike.mycar.whoisdriver();</span><br></pre></td></tr></table></figure>
<h3 id="Other_Good_Things"><a href="#Other_Good_Things" class="headerlink" title="Other Good Things"></a>Other Good Things</h3><ul>
<li>CoffeeScript will quote reserved words automatically if you use them in your literal object;</li>
<li>You can also drop the comma when you define your literal array or literal object only if you put one property per line, you can drop the braces for object, but you need them for array;</li>
<li>Use <code>#{variable_name}</code> to concatenate the string and variables instead of <code>+</code>, but only use them enclosing with double-quote, the single-quote strings are literal, borrowed from ruby;</li>
<li>CoffeeScript will always convert the <code>==</code> and <code>!=</code> to <code>===</code> and <code>!==</code>;</li>
<li>Use the <code>existential operator: ?</code> to check whether a variable exists and has a value or not(means not null or undefined);</li>
<li>Also use the <code>soak: ?.</code> as a shortcut for ternary statement;</li>
<li>Support some new keywords like <code>unless</code>, the opposite to <code>if</code>;</li>
<li>Use plain english aliases for some of the logical operators: <code>is for ===</code>,<code>isnt for !==</code>,<code>not for !</code>,<code>and for &amp;&amp;</code>,<code>or for ||</code>,<code>true can also be yes, or on</code>,<code>false can be no or off</code>;</li>
<li>Support assign multiple values at once;</li>
<li>CoffeeScript replaces the <code>case</code> in <code>switch</code> with <code>when ... then</code>, so you can forget about the <code>break</code>, and it also replaces the <code>default</code> with <code>else</code>;</li>
<li>CoffeeScript supports the <code>chained comparisions</code>: <code>61 &gt; a &gt; 39</code>;</li>
<li>You can use <code>###</code> to comment multiple lines. The biggest difference between <code>###</code> and <code>#</code> is former one will be part of generated javascript;</li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">b=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> a? &amp;&amp; b?</span><br><span class="line">  alert <span class="string">"a.c equals to <span class="subst">#&#123;a?.c&#125;</span>"</span></span><br><span class="line">[city, state, country] = [<span class="string">"!2"</span>,<span class="string">"24"</span>,<span class="string">"2"</span>]</span><br><span class="line"><span class="comment"># or function which returns an object with the same structure as you described before the `=`</span></span><br><span class="line">&#123;<span class="attribute">address</span>: &#123;<span class="attribute">street</span>: myStreet,<span class="attribute">room</span>: myRoom&#125;&#125; = getAddress()</span><br><span class="line"><span class="comment">### =&gt;</span><br><span class="line">var b;</span><br><span class="line">b = 1;</span><br><span class="line">// since we declared the b before, we only need to check if b is null.</span><br><span class="line">if ((typeof a !== "undefined" &amp;&amp; a !== null) &amp;&amp; (b != null)) &#123;</span><br><span class="line">  alert("a.c equals to " + (typeof a !== "undefined" &amp;&amp; a !== null ? a.c : void 0));</span><br><span class="line">&#125;</span><br><span class="line">var city, country, myRoom, myStreet, ref, ref1, state;</span><br><span class="line">ref = ["!2", "24", "2"], city = ref[0], state = ref[1], country = ref[2];</span><br><span class="line">ref1 = getAddress().address, myStreet = ref1.street, myRoom = ref1.room;</span><br><span class="line">###</span></span><br></pre></td></tr></table></figure>
<h3 id="Special_for_List"><a href="#Special_for_List" class="headerlink" title="Special for List"></a>Special for List</h3><ul>
<li>List: CoffeeScript borrowed a lot <code>list comprehensions</code> from python<code>[ x*2 for x in object_name ]</code> and ruby.<ul>
<li><code>while</code>: it works nearly the same as in javascript except that it has an opposite keyword in CoffeeScript: <code>until</code> and both of them can be used as expression and will return a array;</li>
<li><code>for</code>: the standard statement is <code>[action or mapping] for [selector] in [collection] when [condition] by [step]</code>. Last <code>by</code> following with a number would affect the loop step(`i++``);</li>
<li><code>[f_number..l_number]</code>: it will create a array with numbers between the fist number and the last number, you can use <code>...</code>(3 dots) to make the array only contains the numbers in between;</li>
<li><code>of</code>: for key-value pairs of an object, you can use <code>of</code> to loop them through;</li>
</ul>
</li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">times = [<span class="number">0.</span><span class="number">.2</span>]</span><br><span class="line">(n*times <span class="keyword">while</span> times -= <span class="number">1</span>).pop()</span><br><span class="line"><span class="comment">### =&gt;</span><br><span class="line"> var times;</span><br><span class="line"> times = [0, 1, 2];</span><br><span class="line">((function() &#123;</span><br><span class="line">  var results;</span><br><span class="line">  results = [];</span><br><span class="line">  while (times -= 1) &#123;</span><br><span class="line">    results.push(n * times);</span><br><span class="line">  &#125;</span><br><span class="line">  return results;</span><br><span class="line">&#125;)()).pop();</span><br><span class="line">###</span></span><br><span class="line">alert x <span class="keyword">for</span> x <span class="keyword">in</span> flavors <span class="keyword">when</span> x != <span class="string">'h'</span> <span class="keyword">by</span> <span class="number">2</span></span><br><span class="line"><span class="comment">###=&gt;</span><br><span class="line">var x, i, len;</span><br><span class="line">for (i = 0, len = flavors.length; i &lt; len; i+=2) &#123;</span><br><span class="line">  x = flavors[i];</span><br><span class="line">  if (x !== 'h') &#123;</span><br><span class="line">    alert(x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">###</span></span><br><span class="line">ages =</span><br><span class="line"> <span class="attribute">john</span>: <span class="number">25</span></span><br><span class="line"> <span class="attribute">peter</span>: <span class="number">26</span></span><br><span class="line"> <span class="attribute">joan</span>: <span class="number">23</span></span><br><span class="line">alert <span class="string">"<span class="subst">#&#123;name&#125;</span> is <span class="subst">#&#123;age&#125;</span> years old"</span> <span class="keyword">for</span> name, age <span class="keyword">of</span> ages</span><br><span class="line"><span class="comment">###=&gt;</span><br><span class="line">var age, ages, name;</span><br><span class="line">ages = &#123;</span><br><span class="line">  john: 25,</span><br><span class="line">  peter: 26,</span><br><span class="line">  joan: 23</span><br><span class="line">&#125;;</span><br><span class="line">for (name in ages) &#123;</span><br><span class="line">  age = ages[name];</span><br><span class="line">  alert(name + " is " + age + " years old");</span><br><span class="line">&#125;</span><br><span class="line">###</span></span><br></pre></td></tr></table></figure>
<h2 id="Digest"><a href="#Digest" class="headerlink" title="Digest"></a>Digest</h2><ul>
<li>For JavaScript:<ul>
<li>Every <code>class</code> in JS is a function object;</li>
<li>Only function object has the default prototype, so the normal objects like literal string, number or even string created from String(),any objects created by functions, they all don’t have the default prototype;</li>
<li>But every object has a default constructor which is exactly the function object who create it;</li>
</ul>
</li>
<li>For CoffeeScript:<ul>
<li>If there is only one line in the body, you can move it in front of the condition &lt;= <code>while/until/for/if...</code></li>
</ul>
</li>
</ul>
<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><ul>
<li><strong>Q1:</strong> In the second code example above, CoffeeScript create a default extend function for us:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> extend = <span class="function"><span class="keyword">function</span>(<span class="params">child, parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> parent) &#123;</span><br><span class="line">      <span class="keyword">if</span> (hasProp.call(parent, key)) child[key] = parent[key];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Start from here</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ctor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.constructor = child;</span><br><span class="line">  &#125;</span><br><span class="line">  ctor.prototype = parent.prototype;</span><br><span class="line">  child.prototype = <span class="keyword">new</span> ctor();</span><br><span class="line">  <span class="comment">// End</span></span><br><span class="line">  <span class="comment">// Just cannot understand the codes above...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Why we need another function as the child's prototype? We have already copied all the properties from parent, or we just need a beautiful prototype chain? `Car &lt;= ctor() &lt;= Vehicle() &lt;= Object` compared to `Car &lt;= Car &lt;= Object()`.</span></span><br><span class="line">  <span class="comment">// Then why not we just use the child.prototype = new parent() ??? we can still get a good prototype chain. `Car &lt;= Vehicle &lt;= Vehicle &lt;= Object`.</span></span><br><span class="line"></span><br><span class="line">  child.__super__ = parent.prototype;</span><br><span class="line">  <span class="keyword">return</span> child;</span><br><span class="line">&#125;,</span><br><span class="line">hasProp = &#123;&#125;.hasOwnProperty;</span><br></pre></td></tr></table></figure>
<aside class="tipme special"><a href="/blog/tipme" class="tipme">If you like my work, buy me a soda or send me a book ! ^_^</a></aside></section><aside class="sidenav"><input type="text" placeholder="Enter to search" class="st-default-search-input searchbox"></aside><aside class="sidenav series"><h2>In Serie: The Way I Learn CoffeeScript<i class="fa fa-arrow-down expand"></i><i class="collapse fa fa-arrow-up"></i></h2><ul class="article-list"><li><a href="http://taoalpha.me/blog/2015/06/28/read-coffeescript-programming-with-jquery-rails-and-nodejs/" data-id='null' class="current">CoffeeScript Programming with jQuery, rails and Nodejs (1)</a></li><li><a href="http://taoalpha.me/blog/2015/06/30/read-coffeescript-programming-with-jquery-rails-and-nodejs-2/" data-id='null'>CoffeeScript Programming with jQuery, rails and Nodejs (2)</a></li></ul></aside><div class="relatedposts sidenav"><h2>Related Posts:</h2><ul class="article-list"><li><a href="http://taoalpha.me/blog/2015/06/30/read-coffeescript-programming-with-jquery-rails-and-nodejs-2/">CoffeeScript Programming with jQuery, rails and Nodejs (2)</a></li><li><a href="http://taoalpha.me/blog/2015/06/27/read-javascript-the-definitive-guide-8/">JavaScript the Definitive Guide (8)</a></li><li><a href="http://taoalpha.me/blog/2015/06/26/read-javascript-the-definitive-guide-7/">JavaScript the Definitive Guide (7)</a></li><li><a href="http://taoalpha.me/blog/2015/06/25/read-javascript-the-definitive-guide-6/">JavaScript the Definitive Guide (6)</a></li><li><a href="http://taoalpha.me/blog/2015/06/25/read-speaking-like-people-on-ted/">像TED一样演讲</a></li></ul></div><aside class="sidenav"><div class="recentposts"><h2>Recent Posts:</h2><ul class="article-list"><li><a href="http://taoalpha.me/blog/2016/01/31/oj-oj-parentheses-problems/">OJ Parentheses Problems 1</a></li><li><a href="http://taoalpha.me/blog/2016/01/16/oj-oj-leetcode-numbers-1/">OJ LeetCode Numbers 1</a></li><li><a href="http://taoalpha.me/blog/2016/01/16/tech-add-a-reading-progressbar-to-your-blog/">Add a reading progressbar to your blog</a></li><li><a href="http://taoalpha.me/blog/2016/01/16/oj-oj-leetcode-substring-questions-1/">OJ LeetCode Substring Questions 1</a></li><li><a href="http://taoalpha.me/blog/2016/01/13/oj-oj-leetcode-nsum/">OJ LeetCode NSum Problem</a></li></ul></div></aside><div class="comments"><div data-thread-key="2015/06/28/read-coffeescript-programming-with-jquery-rails-and-nodejs/" data-title="CoffeeScript Programming with jQuery, rails and Nodejs (1)" data-url="http://taoalpha.me/blog/2015/06/28/read-coffeescript-programming-with-jquery-rails-and-nodejs/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"taoalpha"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></article><div class="notification fail hidden"></div><!-- jquery--><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46725017-2",'auto');ga('send','pageview');</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','CUMLELEvkSRAFuVehSCm','2.0.0');</script><!-- main functions--><script src="/blog/js/functions.js"></script><script src="/blog/js/default.js"></script><script src="/blog/js/post.js"></script></body></html>